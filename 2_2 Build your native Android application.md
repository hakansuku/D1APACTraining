# 2_2 Build your native Android application (CookieClicker)

## 1) Declare permissions for the application in the Android manifest file
> The Android manifest file helps to declare the permissions that an app must have to access data from other apps.

Expand the manifest folder from the app folder structure and open AndroidManifest.xml
Insert the below code to declare the following permissions :
```kotlin 
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
```
![manifest](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/manifest.png?raw=true)

## 2) Design your User Interface (UI) with Layout Editor
Expand res folder.  Under layout folder locate activity_main.xml click to open. 
- Change to Code view (tab)
- Delete existing TextView element as below

![iactivity_main](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/activityview.png?raw=true)
> Replace with below code.  This will add 3 elements to the layout

```xml
<TextView
        android:id="@+id/counter"
        android:layout_width="240dp"
        android:layout_height="100dp"
        android:text="CookieClicker"
        android:textAlignment="center"
        android:textSize="34sp"
        android:textStyle="bold"
        app:layout_constraintBottom_toTopOf="@+id/button"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent" />

    <Button
        android:id="@+id/button"
        android:layout_width="244dp"
        android:layout_height="234dp"
        android:text="Click +"
        app:layout_constraintBottom_toTopOf="@+id/ExitButton"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/counter" />

    <Button
        android:id="@+id/ExitButton"
        android:layout_width="160dp"
        android:layout_height="100dp"
        android:text="EXIT"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toBottomOf="@+id/button" />
```
![kayout code](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/insert.png?raw=true)
 - TextView element : CookiClicker
- Button element : Click +
- Button element : Exit
>  Chagne the XML viewing mode to visualize above UI elements in the layout 

Click on Design mode (tab).

![layout](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/editlayout.png?raw=true)
> Info on Layout Editor can be found at https://developer.android.com/studio/write/layout-editor

## 3) Get started with coding the MainActivity class

> The MainActivity.kt file is a Kotlin source code file typically used in Android app development. This file was autogenerated for us when we created the project and contains the main activity of an Android app, serving as the entry point for the application and is the first screen to appear when the user launches the app.

Edit the class declaration and add the first part of the code for the MainActivity class:

Click to open MainActivity file in the editor

![MainActivity](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/androidappview.png?raw=true)

In the editor, copy the below code and insert into the MainActivity source code as below

```kotlin
        // variables
        var counter=0 
        val button = findViewById<Button>(R.id.button) 
        val exitbutton = findViewById<Button>(R.id.ExitButton) 
        
        // listener for score increment button click
        button.setOnClickListener {
            counter++ //increment score by 1
            findViewById<TextView>(R.id.counter).text=counter.toString() //update score view
        }

        // listener for exit button click
        exitbutton.setOnClickListener {
            finishAndRemoveTask() // exit mobile application
        }
```

> Notice the added two library imports. Android Studio will remind what needs to be imported.

> Import necessary classes like Button and TextView

![MainActivitye](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/mainactivity.png?raw=true)
> In summary the above added code does:
- declares and initializes a counter and button handlers for use
- adds a listener for "Click +" button and increments by 1 when clicked. 
- adds a listerer for "Exit" button which terminates the application when clicked.

## 4) Run the application 
>  Click on Run icon to Run the application in the Emulator

![Runbutton](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/PlaytoRun.png?raw=true)
> During each run , Android Studio will recompile and install the software and install in the virtual device. 

## 5) Testing 
- Test the app by tapping on the 'Click +' button.  
- Observe how the Total number of taps is displayed
- Press 'Exit' button and confirm application is terminated.

> You can also stop the application running by stopping from using the red stop icon in Adroid studio. 

![Test](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/runningapp2.png?raw=true)

## 6) View logs with Logcat

> The Logcat window in Android Studio helps you debug your app by displaying logs from your device in real time

![Logcat](https://github.com/hakansuku/D1APACTraining/blob/main/images/mobile/debug.png?raw=true)

End of Document
